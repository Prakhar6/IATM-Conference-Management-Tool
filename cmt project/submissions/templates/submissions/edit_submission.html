{% extends 'dashboard.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <h2>Edit Submission</h2>
            <p class="text-muted">Conference: {{ conference.name }}</p>

            {% if submission.role1 or submission.role2 %}
                <p class="mb-3">
                    <strong>Your Roles:</strong>
                    {% if submission.role1 %}
                        <span class="badge bg-dark me-1">{{ submission.role1 }}</span>
                    {% endif %}
                    {% if submission.role2 %}
                        <span class="badge bg-dark">{{ submission.role2 }}</span>
                    {% endif %}
                </p>
            {% endif %}

            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="mb-3">
                    <label for="{{ form.track.id_for_label }}" class="form-label">Track</label>
                    {{ form.track }}
                    {% if form.track.errors %}
                        <div class="alert alert-danger">
                            {{ form.track.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="mb-3">
                    <label for="{{ form.paper_title.id_for_label }}" class="form-label">Paper Title</label>
                    {{ form.paper_title }}
                    {% if form.paper_title.errors %}
                        <div class="alert alert-danger">
                            {{ form.paper_title.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="mb-3">
                    <label for="{{ form.co_author_email_1.id_for_label }}" class="form-label">Co-Author 1 Email</label>
                    {{ form.co_author_email_1 }}
                    {% if form.co_author_email_1.errors %}
                        <div class="alert alert-danger">
                            {{ form.co_author_email_1.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="mb-3">
                    <label for="{{ form.co_author_email_2.id_for_label }}" class="form-label">Co-Author 2 Email</label>
                    {{ form.co_author_email_2 }}
                    {% if form.co_author_email_2.errors %}
                        <div class="alert alert-danger">
                            {{ form.co_author_email_2.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="mb-3">
                    <label for="{{ form.co_author_email_3.id_for_label }}" class="form-label">Co-Author 3 Email</label>
                    {{ form.co_author_email_3 }}
                    {% if form.co_author_email_3.errors %}
                        <div class="alert alert-danger">
                            {{ form.co_author_email_3.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="mb-3">
                    <label for="{{ form.file.id_for_label }}" class="form-label">Paper File (PDF only, leave empty to keep current file)</label>
                    {{ form.file }}
                    {% if form.file.errors %}
                        <div class="alert alert-danger">
                            {{ form.file.errors }}
                        </div>
                    {% endif %}
                    {% if submission.file %}
                        <p class="text-muted mt-2">Current file: {{ submission.file.name }}</p>
                    {% endif %}
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <a href="{% url 'submission_detail' pk=submission.pk %}" class="btn btn-secondary ms-2">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
