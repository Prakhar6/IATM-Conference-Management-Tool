{% extends "dashboard.html" %}
{% load static %}

{% block content %}
<h2>{{ conference.conference_name }} â€“ Admin Dashboard</h2>

<div class="table-responsive">
  <table class="table table-bordered align-middle table-hover">
    <thead class="table-dark">
      <tr>
        <th>First</th>
        <th>Last</th>
        <th>Organization</th>
        <th>Role 1</th>
        <th>Role 2</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for member in memberships %}
      <tr>
        <form method="POST" class="d-flex align-items-center">
          {% csrf_token %}
          <input type="hidden" name="membership_id" value="{{ member.id }}">
          <td>{{ member.user.first_name }}</td>
          <td>{{ member.user.last_name }}</td>
          <td>{{ member.user.organization }}</td>
          <td>
            <select name="role1" class="form-select form-select-sm">
              {% for key, label in Role.choices %}
              <option value="{{ key }}" {% if member.role1 == key %}selected{% endif %}>{{ label }}</option>
              {% endfor %}
            </select>
          </td>
          <td>
            <select name="role2" class="form-select form-select-sm">
              {% for key, label in Role.choices %}
              <option value="{{ key }}" {% if member.role2 == key %}selected{% endif %}>{{ label }}</option>
              {% endfor %}
            </select>
          </td>
          <td>
            <button type="submit" class="btn btn-primary btn-sm">Update Roles</button>
          </td>
        </form>
      </tr>
      {% empty %}
      <tr><td colspan="6" class="text-center">No members registered.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
